<!DOCTYPE html>
<html>
<head>
    <title>Рабочее место</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link href="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/ui-darkness/jquery-ui.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.0.4/popper.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.1.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <!--            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/c9d9ba4d4e.js" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey={{.yaKey}}&lang=ru_RU"
            type="text/javascript"></script>
    <!--        <script src="https://api-maps.yandex.ru/1.1/index.xml"-->
    <!--                type="text/javascript"></script>-->
    <script>
        function openForm() {
            document.getElementById("myForm").style.display = "block";
            document.getElementsByClassName("open-button")[0].style.display = "none";
        }

        function closeForm() {
            document.getElementById("myForm").style.display = "none";
            document.getElementsByClassName("open-button")[0].style.display = "block";
        }
    </script>
    <script src="free/js/map.js" type="text/javascript"></script>
    <link rel="icon"
          type="image/svg"
          href="/free/resources/trafficlight.svg"/>
    <style type="text/css">
        html, body, #map {
            height: 100%;
            padding: 0;
            margin: 0;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        .dot {
            height: 15px;
            width: 15px;
            background-color: #bbb;
            border-radius: 100%;
            display: inline-block;
        }

        * {
            box-sizing: border-box;
        }
    </style>
</head>
<div id="locationDialog" title="Выбор района">
    <form class="needs-validated">
        <div class="form-group" id="regionForm"> <!--onclick="fillAreas()">-->
            <label for="region">Регион</label>
            <select class="form-control" id="region">
            </select>
        </div>
        <div class="form-group" id="areasForm">
            <label for="area">Районы (зажмите ctrl для выбора нескольких)</label>
            <select class="form-control" id="area" multiple>
            </select>
        </div>
    </form>
</div>
<div id="techDialog" title="Выбор района">
    <form class="needs-validated">
        <div class="form-group" id="techRegionForm"> <!--onclick="fillAreas()">-->
            <label for="region">Регион</label>
            <select class="form-control" id="techRegion">
            </select>
        </div>
        <div class="form-group" id="techAreasForm">
            <label for="area">Районы (зажмите ctrl для выбора нескольких)</label>
            <select class="form-control" id="techArea" multiple>
            </select>
        </div>
    </form>
</div>
<body style="max-height: 960px;">
<div class="container-fluid">
    <div id="toolbar" class="row" style="min-height: 38px;">
        <div class="col-md-2 text-center">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownControlButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Управление картой
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item" type="button" id="locationButton">Перемещение</button>
                <button class="dropdown-item" type="button" id="fragmentButton">Фрагменты</button>
                <button class="dropdown-item" type="button" id="fixationButton">Зафиксировать экран</button>
            </div>
        </div>
        <div class="col-md-1 text-left">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownConnectionButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Связь
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <b class="dropdown-item" id="databaseConnection">Состояние связи с базой <span class="dot"></span></b>
                <b class="dropdown-item" id="serverConnection">Состояние связи с сервером <span class="dot"></span></b>
            </div>
        </div>
        <div class="col-md-4 text-center">
            <strong class="text-center" id="workPlace">Рабочее место</strong>
        </div>
        <div class="col-md-1 text-center">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownSettingsButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Настройки
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item" type="button" id="setAreaButton">Районы перемещения</button>
                <button class="dropdown-item" type="button" id="setFragmentButton">Районы фрагментов</button>
                <button class="dropdown-item" type="button" id="fixationReset">Снять фиксацию</button>
            </div>
        </div>
        <div class="dropdown col-md-2 text-center">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownAdminMenu"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Администрирование
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item" type="button" id="changeUserButton">Сменить пользователя</button>
                <button class="dropdown-item" type="button" id="changeButton">Сменить пароль</button>
                <button class="dropdown-item" type="button" id="manageButton" style="display: none;">Таблица прав и
                    данных операторов, названий армов
                </button>
            </div>
        </div>
        <div class="col-md-1 text-center">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownHelpButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Помощь
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item" type="button" id="instructionButton">Инструкция</button>
                <button class="dropdown-item" type="button" id="aboutButton">О производителе</button>
            </div>
        </div>
        <div class="col-md-1 text-right">
            <button id="logoutButton" class="btn btn-secondary" style="display: none;">Выход</button>
            <button id="loginButton" class="btn btn-secondary">Вход</button>
        </div>
    </div>
    <div style="position: absolute; top: 300px; right: 50px; z-index: 2">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownLayersButton"
                data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">Слои
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div class="dropdown-item">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" id="switchLayout">Районы
                </label>
            </div>
            <div class="dropdown-item">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" id="camerasLayout">Камеры
                </label>
            </div>
            <div class="dropdown-item">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" id="directionLayout">Направления
                </label>
            </div>
            <div class="dropdown-item">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" id="trackerLayout">Трекер
                </label>
            </div>
            <button class="dropdown-item" type="button" id="addLayoutButton">Добавить слой</button>
        </div>
    </div>
    <!--                <button class="dropdown-item" type="button" id="deviceLogButton" style="display: none;">Логи устройств</button>-->
    <!--                <button class="dropdown-item" type="button" id="techButton" style="display: none;">АРМ технолога</button>-->
</div>
<div id="loginDialog" class="container-sm" style="display: none;" title="Авторизация">
    <form class="needs-validated">
        <div class="form-group" id="loginForm">
            <label for="login">Логин</label>
            <input type="text" class="form-control" id="login" placeholder="Введите логин" name="login" required>
            <div class="invalid-feedback">Пожалуйста, заполните поле верно.</div>
        </div>
        <div class="form-group" id="passwordForm">
            <label for="password">Пароль</label>
            <input type="password" class="form-control" id="password" placeholder="Введите пароль" name="password"
                   data-toggle="password"
                   required>
            <div class="invalid-feedback">Пожалуйста, заполните поле верно.</div>
        </div>
    </form>
</div>
<div id="changeDialog" title="Смена пароля" style="display: none;">
    <div class="form-group" id="oldPasswordForm">
        <label for="oldPassword">Старый пароль</label>
        <input type="password" class="form-control" id="oldPassword" name="password"
               required>
    </div>
    <div class="form-group" id="newPasswordForm">
        <label for="newPassword">Новый пароль</label>
        <input type="password" class="form-control" id="newPassword" name="password"
               required>
    </div>
    <div class="form-group" id="repPasswordForm">
        <label for="repPassword">Повторите пароль</label>
        <input type="password" class="form-control" id="repPassword" name="password"
               required>
    </div>
</div>
<div class="container-fluid border border-dark" id="map" style="max-height: 920px; position: relative; z-index: 1"></div>
<template id="chat">
    <button class="open-button" onclick="openForm()" style="position: fixed; z-index: 2;">Открыть чат</button>
    <div class="form-popup" id="myForm">
        <link rel="stylesheet" href="/file/web/css/chat.css">
        <form class="form-container">
            <div id="root"></div>
            <script src="/file/web/js/main.js"></script>
            <button type="button" class="btn cancel" onclick="closeForm()">Закрыть</button>
        </form>
    </div>
</template>
</body>
</html>